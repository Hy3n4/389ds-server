---
#- name: Configure EPEL repository
#  yum: name=epel-release state=present

#- name: Install packages
#  yum: name={{item}} state=present
#  with_items:
#    - 389-ds-base
#    - 389-admin
#    - openldap-clients
#    - pyOpenSSL

# TODO: make sure that this is useless in newer versions before removing
#- name: Configure sysctl variables
#  sysctl: name={{item.name}}  value={{item.value}} sysctl_set=yes state=present
#  with_items:
#    - {name: net.ipv4.tcp_keepalive_time, value: 300}
#    - {name: net.ipv4.ip_local_port_range, value: "1024 65000"}

# TODO: but is this *really* needed? What if I want the server to be accessible from localhost only?
- name: Allow ldap port on firewalld
  firewalld: service=ldap permanent=true state=enabled

#- name: Allow port 9830 on firdwalld
#  firewalld: port=9830/tcp  permanent=true state=enabled
