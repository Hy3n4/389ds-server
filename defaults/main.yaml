---
# Configuration type
# if it is set - preparation and 389-ds configuration activities will be skipped (usually to add a new replication agreement)
# TODO: remove this, make a separate role for replication agreements
skip_config: false

# Replication master settings

rwmaster: false
replication_nsds5replicaid: 7
agreement_name: ExampleAgreement
replica_host: replica.example.com
init_replica: false

# Replication replica settings

roreplica: false
# this will create LDAP user cn=replmanager,cn=config
replication_user: replmanager
replication_user_password: Admin123

# --- TODO: Remove part above this line -------------------------------

# Instance settings

suffix: dc=example,dc=com
rootdn: cn=Directory Manager
#rootdn_password: secret
ldap_fqdn: "{{ ansible_nodename }}"
serverid: ldap

# Admin Server

# admin_password: "{{ password }}"
# admin_domain: "{{ '.'.join(ldap_fqdn.split('.')[1:]) }}"

# Logging

logging:
  audit:
    enabled: true
    logrotationtimeunit: day
    logmaxdiskspace: 400
    maxlogsize: 200
    maxlogsperdir: 7
    mode: 600
  access:
    enabled: true
    logrotationtimeunit: day
    logmaxdiskspace: 400
    maxlogsize: 200
    maxlogsperdir: 7
    mode: 600
  error:
    enabled: true
    logrotationtimeunit: day
    logmaxdiskspace: 400
    maxlogsize: 200
    maxlogsperdir: 7
    mode: 600

# Plugins

# If you want to enable or disable
# cn=MemberOf Plugin,cn=plugins,cn=config
# add the cn part to the list, like so:
# MemberOf Plugin: true
# true for enabled, false for disabled.
plugins_enabled:
  MemberOf Plugin: true
  #Distributed Numeric Assignment Plugin: false

# Ansible doesn't merge dicts by default, i.e. if you want to
# change only uid_max and gid_max you have to define the _min
# variables too. When you define dna_plugin, it replaces this
# default dict entirely.
# This configuration is only applied if "Distributed Numeric Assignment Plugin" is true in plugins_enabled, and is removed when it is false. If it's not mentioned, nothing is done.
dna_plugin:
  gid_min: 2000
  gid_max: 2999
  uid_min: 2000
  uid_max: 2999

# Security

tls_enabled: false
tls_min_version: '1.2'
allow_anonymous_binds: 'rootdse'
simple_auth_enabled: true
sasl_enabled: false
# It's already off by default
#allow_unauthenticated_binds: false

# Other

ldapi_enabled: false


# Display supported cipher suites:
# ldapsearch -xLLL -H ldap://server.example.com:389 -D "cn=Directory Manager" -W -b 'cn=encryption,cn=config' -s base nsSSLSupportedCiphers -o ldif-wrap=no dn: cn=encryption,cn=config

# Display enabled cipher suites:
#ldapsearch -xLLL -H ldap://localhost -D "cn=Directory Manager" -W -b 'cn=encryption,cn=config' -s base nsSSLEnabledCiphers -o ldif-wrap=no
